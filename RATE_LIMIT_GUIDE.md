# دليل معالجة Rate Limit في مولد امتحانات الفيزياء

## المشكلة
عند استخدام Google Generative AI (Gemini)، قد تواجه خطأ **"تم تجاوز حد الطلبات (Rate Limit)"**. هذا يعني أنك وصلت إلى حد الطلبات المسموح به في فترة زمنية معينة.

## الحلول

### 1. **الانتظار قبل المحاولة مجدداً**
- عند ظهور خطأ Rate Limit، **انتظر 30-60 ثانية** على الأقل
- ثم حاول توليد الاختبار مرة أخرى
- النظام يحاول تلقائياً إعادة المحاولة 5 مرات مع تأخير متزايد

### 2. **تقليل عدد الأسئلة**
- بدلاً من طلب 20 سؤال، جرّب طلب **10 أسئلة** فقط
- هذا سيقلل حمل الطلبات على الـ API
- يمكنك إضافة أسئلة إضافية لاحقاً باستخدام "إضافة أسئلة" بدلاً من توليد كامل الاختبار

### 3. **توزيع الطلبات على فترات زمنية**
- لا تحاول توليد عدة اختبارات في نفس الوقت
- انتظر 1-2 دقيقة بين الطلبات الكبيرة
- استخدم النماذج المُختلفة (Variant) بدلاً من توليد اختبار جديد من الصفر

### 4. **التحقق من مفتاح API**
- تأكد أن مفتاح Google Generative AI صحيح
- اذهب إلى [Google AI Studio](https://aistudio.google.com/)
- احصل على مفتاح API جديد إذا لزم الأمر

### 5. **خطط الاستخدام المتاح**
يعتمد حد الطلبات على خطتك:
- **الخطة المجانية (Free)**: محدودة جداً (حوالي 15 طلب/دقيقة)
- **الخطة المدفوعة**: حدود أعلى كثيراً

### 6. **الميزات البديلة**
إذا كان Rate Limit مشكلة متكررة:
- استخدم **نموذج الأسئلة المتاح** وعدّله يدوياً
- استخدم **محرر JSON** لإضافة أسئلة بدون استدعاء API
- استخدم **استخراج من الصور** بدلاً من التوليد الكامل

## رسائل الخطأ الشائعة

| الخطأ | المعنى | الحل |
|------|--------|------|
| Rate Limit (429) | تم تجاوز حد الطلبات | انتظر 30-60 ثانية |
| API Key Error (403) | مفتاح API غير صحيح | تحقق من الإعدادات |
| SERVICE_UNAVAILABLE (503) | الخدمة مشغولة | جرّب في وقت آخر |
| INVALID_ARGUMENT | خطأ في المدخلات | تحقق من صيغة المدخلات |

## نصائح للأداء الأمثل

✅ **افعل:**
- استخدم أسئلة أقل (5-10 أسئلة) للاختبارات السريعة
- انتظر بين الطلبات الكبيرة
- احفظ الاختبارات الجيدة لإعادة الاستخدام
- استخدم الملاحظات لتحسين الأسئلة

❌ **لا تفعل:**
- لا تحاول توليد أكثر من 50 سؤال في طلب واحد
- لا تضغط الزر عدة مرات بسرعة
- لا تتوقع استجابة فورية للطلبات الضخمة

## الدعم والمساعدة

إذا استمرت المشكلة:
1. تحقق من اتصالك بالإنترنت
2. حاول مع متصفح مختلف
3. امسح ذاكرة التطبيق (Cache)
4. تحقق من حالة خدمة Google Cloud
